<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">

<meta name="viewport" content="width=300, user-scalable=no">
<title>QAmemorize select game</title>
<link rel="stylesheet" href="genso.css" type="text/css" /><style type="text/css">
<script type="text/javascript" src="jquery-1.12.3.min.js"></script> 

<script>
var titlestr="";
var qary=new Array();
var aary=new Array();
var cardary=new Array();
var haiteiary=new Array();

var aindex=0;
var cardindex=0;
var carditemy=0;
var gstatus=0;
var t=0;
var shootindex=-1;
var wmove=0;
var scrlheight=230;
var seikai=0;
var fuseikai=0;

var level=1;
var isreverse=0;
var timer=-1;
var itemheight=23;
var dummypheight=1000;


function funcDummyScrl(){
  var scrl=$('#dummy').scrollTop();
  
  var curi=Math.floor(scrl/itemheight);
  
  //console.log("scrl="+scrl+" curi="+curi);
  if(curi<0){
    curi=0;
  }
  if(curi>aary.length-1){
   	  curi=aary.length-1;
  }
  aindex=curi;
  //  console.log(aindex);
  setAItems(); 
  
}


$(function() {
	$(".btnshoot").on("touchenter",shoot);
	$(".btnshoot").on("mousedown",shoot);
	
	itemheight=$(window).height()*0.9*0.5/9;
	console.log(itemheight);
	
	$("#dummy").scroll(function() { 
	  funcDummyScrl();
	});
			     
});

function setAItems(){
   var i;
   for(i=1;i<=9;i++){
     if(aindex-5+i>=0 && aindex-5+i<aary.length){
	    $("p",".scrlitem"+i).html(aary[aindex-5+i]);
	 }
	 else{
	    $("p",".scrlitem"+i).html("");
	 }
   }

}

function setCardItem(){
	$("p",".card").html(cardary[cardindex]);
	
}
function shoot(){
  shootindex=0;
}

function drawFooter(){
 $('.footer').html("No."+(cardindex+1)+"/"+aary.length+"ã€€ã€€ã€‡:ã€€"+seikai+"ã€€ã€€Ã—:ã€€"+fuseikai);
}

function frame(){
    var sec=100;
    t++;

    switch(gstatus){
    	case 0://é–‹å§‹
    	  $('div#hantei').css("z-index","0");
	      shootindex=-1;
	      wmove=0;
	      carditemy=0;
	      renzoku=0;
	      $(".shootbar").css("top","85%");
	      $(".shootbar").css("height","3%");
	      $(".card").css("top","50%");
	      drawFooter();
	      setCardItem();
	      gstatus=1;
	    break;
	   
	    case 1://è½ã¡ã‚‹é€”ä¸­
	  
	      if(shootindex==-1){
	        if(t%10==0){//è½ã¡ã‚‹å‹•ã
		      $(".card").css("top",""+(50+2*carditemy)+"%");
		      carditemy++;
		    }
		  }
		  else{
		    //ãƒãƒ¼ä¸Šæ˜‡
		    $(".shootbar").css("top",""+(88-(15*shootindex))+"%");
		    $(".shootbar").css("height",""+(15*shootindex)+"%");
		    if(wmove==0 && (88-(15*(shootindex-1)))>(50+2*carditemy) && (88-(15*shootindex))<=(50+2*carditemy)){
		      wmove=1;
		    }
		    if(wmove==1){
		        //ãƒãƒ¼ã¨ã‚«ãƒ¼ãƒ‰ãŒä¸€ç·’ã«ä¸Šæ˜‡
		        $(".card").css("top",""+(88-(15*shootindex)-5)+"%");
		    }
		    shootindex++;
		    if(shootindex==5){//ä¸ŠãŒã‚Šåˆ‡ã£ãŸ
				gstatus=4;
		    }
		  }
	      if(wmove==0){
			   
	           if(carditemy==17){//ä¸‹ãŒã‚Šåˆ‡ã£ãŸ
	               gstatus=2;
	           }
	      }
	    break;
	    
	    case 2://ä¸‹ãŒã‚Šåˆ‡ã£ãŸ
	      haiteiary[cardindex]=0;//ã¯ãšã‚Œ
	      gstatus=6;
	    break;
	    
	    case 4://ä¸ŠãŒã‚Šåˆ‡ã£ãŸ

	      if(qary[aindex]==cardary[cardindex]){
	        haiteiary[cardindex]=1;//ã‚ãŸã‚Š
	        gstatus=5;
	      }
	      else{
	        haiteiary[cardindex]=0;//ã¯ãšã‚Œ
	        gstatus=6;
	      }
	      
	    break;
	    
	    case 5://ã‚ãŸã‚Š
	      $("p",'div#hantei').html("ã€‡<br/>"+cardary[cardindex]+"<br/>"+aary[aindex]);

	      $('div#hantei').css("background-color","royalblue");
	      $('div#hantei').css("border-color","blue");
	      $('div#hantei').css("z-index","30");
	      sec=1000;
	      seikai++;
	      drawFooter();
	      gstatus=7;

	    break;
	    
	    case 6://ã¯ãšã‚Œ
	      var ai=0;
	      for(ai=0;ai<aary.length;ai++){
	        if(qary[ai]==cardary[cardindex]){
	           break;
	        }
	      }
	      $("p",'div#hantei').html("Ã—<br/>"+cardary[cardindex]+"<br/>"+aary[ai]);

	      $('div#hantei').css("background-color","hotpink");
	      $('div#hantei').css("border-color","red");
	      $('div#hantei').css("z-index","30");
	      sec=1000;
	      fuseikai++;
	      drawFooter();
	      gstatus=7;
	    break;
	    
	    case 7://next
	      cardindex++;
	      if(cardindex<cardary.length){
	        gstatus=0;
	      }
	      else{
	        gstatus=10;
	        console.log("end");
	      }
	    break;
	    
     }

  if(gstatus!=10){
     timer=setTimeout('frame()',sec);
  }
  else{
    clearTimeout(timer);
    timer=0;
    gameend();
  }
}
function initHantei(){
  var i;
  for(i=0;i<haiteiary.length;i++){
     haiteiary[i]=0;
  }
}

function gameend(){
  $('div#hantei').css("z-index","0");
  $(".btnend").css("display","table");
  console.log("gameend");
}

function gamestart(){
  if(timer>0){
    clearTimeout(timer);
    timer=0;
  }
  $(".btnstart1").css("display","none");
  $(".btnstart2").css("display","none");
  t=0;
  seikai=0;
  fuseikai=0;
  cardindex=0;
  aindex=0;
  carditemy=0;
  gstatus=0;
  setAItems();
  setCardItem();
  initHantei();
  setTimeout('frame()',100);
}

function start1(){
  isreverse=0;
  readcard();
  initqa();
  gamestart();


}

function start2(){
  isreverse=1;
  readcard();
  initqa();
  gamestart();

}

function shuffleArray(ary) {
  var length = ary.length;
  while(length){
    var k = Math.floor(Math.random()*length);
    var temp = ary[--length];
    ary[length] = ary[k];
    ary[k] = temp;
  }
  return ary;
}
function readcard(){
  var qatext=$(".qatext"+level).text();
  var qas=qatext.split("\n");
  titlestr=qas[0].substring(3);
  
  
  qary.length=0;
  aary.length=0;
  cardary.length=0;
  haiteiary.length=0;

  var i;
  for(i=2;i+1<qas.length;i=i+2){
    if(qas[i].length>0 && qas[i+1].length>0){
  	  qary.push(qas[i]);
  	  aary.push(qas[i+1]);
  	  
  	}
  }
  dummypheight=itemheight*(aary.length+9);
  console.log("itemheight="+itemheight+" length="+aary.length+" dummypheight="+dummypheight+"px");
  $('#dummyp').css("height",""+dummypheight+"px");
  $('#dummy').scrollTop(0);
}

function initqa(){
  var i;
  if(isreverse==1){
    var tmp=qary;
    qary=aary;
    aary=tmp;
  }
  for(i=0;i<qary.length;i++){
      haiteiary.push(0);
      cardary.push(qary[i]);
  }
  cardary=shuffleArray(cardary);
 
}

function drawHeader(){
  $('p','.header').eq(0).html(titlestr+"ã€€ğŸ‘†ã€€");
}

function changeLevel(){

  switch(level){
    case 1:level=2;
    break;
    case 2:level=3;
    break;
    case 3:level=1;
    break;
   }
   init();
   initqa();
   
   var dsp=$(".qa").css("display");
   if(dsp!="none"){
     $(".qa").css("display","none");
     dispQA();
   }
   
}


function init(){
 //andjs.makeToast("test");
  t=0;
  seikai=0;
  fuseikai=0;
  cardindex=0;
  aindex=0;
  carditemy=0;
  gstatus=0;
    readcard();
    drawHeader();
    drawFooter();
    
	  if(timer>0){
	    clearTimeout(timer);
	    timer=0;
	  }
	  $(".btnstart1").css("display","table");
	  $(".btnstart2").css("display","table");
	  $(".btnend").css("display","none");
	  console.log("init done");
}

function dispQA(){

  var dsp=$(".qa").css("display");
  if(dsp=="none"){
	  $(".qatext"+1).css("display","none");
	  $(".qatext"+2).css("display","none");
	  $(".qatext"+3).css("display","none");
	  $(".qatext"+level).css("display","block");
	  $(".qa").css("display","block");
   }
   else{
       $(".qa").css("display","none");
   }
   init();
}

function funcShowMsg(msg){
  var dsp=$(".qa").css("display");
  if(dsp!="none"){
  		dispQA();
  }
  else{
  	andjs.funcExit();
  }
}

</script>

</head>
<body onLoad="init()">
<div class="header" >
<p onClick="changeLevel()"></p><div class="notebtn" onClick="dispQA()"><p>â€¦</p></div>
</div>
<div class="leftside" >
<p></p>
</div>
<div class="rightside" >
<p></p>
</div>
<div class="footer" >
<p></p>
</div>
<div class="cvs" >
<p id="dummy" >
<img src="" id="dummyp">
</img>
</p>
	<div class="scrlbox" >
	  <div style="right:0%;top:28%;width:10%"><p>â†‘</p></div>
	  <div style="right:90%;top:28%;width:10%"><p>â†‘</p></div>
	  <div style="right:0%;top:40%;width:10%"><p>ğŸ‘†</p></div>
	  <div style="right:90%;top:40%;width:10%"><p>ğŸ‘†</p></div>
	  <div style="right:0%;top:53%;width:10%"><p>â†“</p></div>
	  <div style="right:90%;top:53%;width:10%"><p>â†“</p></div>
	  <div class="sitem1 panel sl1"><div class="scrlitem1 panel sl1"><p></p></div></div>
	  <div class="sitem2 panel sl2"><div class="scrlitem2 panel sl2"><p></p></div></div>
	  <div class="sitem3 panel sl3"><div class="scrlitem3 panel sl3"><p></p></div></div>
	  <div class="sitem4 panel sl4"><div class="scrlitem4 panel sl4"><p></p></div></div>
	  <div class="sitem5 panel sl5"><div class="scrlitem5 panel sl5"><p></p></div></div>
	  <div class="sitem6 panel sl6"><div class="scrlitem6 panel sl6"><p></p></div></div>
	  <div class="sitem7 panel sl7"><div class="scrlitem7 panel sl7"><p></p></div></div>
	  <div class="sitem8 panel sl8"><div class="scrlitem8 panel sl8"><p></p></div></div>
	  <div class="sitem9 panel sl9"><div class="scrlitem9 panel sl9"><p></p></div></div>
	</div>
	
	<div id="hantei"><p>ã€‡</p></div>

	<div class="card"><p></p></div>

	<div class="shootbar">
	</div>
	
	<div class="btnshoot"><p>ğŸ‘†</p></div>
	
	
	<div class="btnstart1" onClick="start1()" >
	<p>Start<br/>Normal</p>
	</div>
	
	<div class="btnstart2" onClick="start2()">
	<p>Start<br/>Reverse</p>
	</div>

	<div class="btnend" onClick="init()">
	<p>End</p>
	</div>
	
</div>
<div class="qa" style="display:none">
<textarea class="qatext1">
QAU å…ƒç´ ã€€åŸºæœ¬

H
æ°´ç´ 
C
ç‚­ç´ 
N
çª’ç´ 
O
é…¸ç´ 
S
ç¡«é»„
Cl
å¡©ç´ 
Na
ãƒŠãƒˆãƒªã‚¦ãƒ 
Mg
ãƒã‚°ãƒã‚·ã‚¦ãƒ 
Al
ã‚¢ãƒ«ãƒŸãƒ‹ã‚¦ãƒ 
K
ã‚«ãƒªã‚¦ãƒ 
Ca
ã‚«ãƒ«ã‚·ã‚¦ãƒ 
Fe
é‰„
Cu
éŠ…
Zn
äºœé‰›
Ag
éŠ€
</textarea>
<textarea class="qatext2">
QAU å…ƒç´ ã€€æ¨™æº–

H
æ°´ç´ 
He
ãƒ˜ãƒªã‚¦ãƒ 
Li
ãƒªãƒã‚¦ãƒ 
Be
ãƒ™ãƒªãƒªã‚¦ãƒ 
B
ãƒ›ã‚¦ç´ 
C
ç‚­ç´ 
N
çª’ç´ 
O
é…¸ç´ 
F
ãƒ•ãƒƒç´ 
Ne
ãƒã‚ªãƒ³
Na
ãƒŠãƒˆãƒªã‚¦ãƒ 
Mg
ãƒã‚°ãƒã‚·ã‚¦ãƒ 
Al
ã‚¢ãƒ«ãƒŸãƒ‹ã‚¦ãƒ 
Si
ã‚±ã‚¤ç´ 
P
ãƒªãƒ³
S
ç¡«é»„
Cl
å¡©ç´ 
Ar
ã‚¢ãƒ«ã‚´ãƒ³
K
ã‚«ãƒªã‚¦ãƒ 
Ca
ã‚«ãƒ«ã‚·ã‚¦ãƒ 
Fe
é‰„
Cu
éŠ…
Zn
äºœé‰›
Ag
éŠ€
</textarea>
<textarea class="qatext3">
QAU å…ƒç´ ã€€é›£é–¢

H
æ°´ç´ 
He
ãƒ˜ãƒªã‚¦ãƒ 
Li
ãƒªãƒã‚¦ãƒ 
Be
ãƒ™ãƒªãƒªã‚¦ãƒ 
B
ãƒ›ã‚¦ç´ 
C
ç‚­ç´ 
N
çª’ç´ 
O
é…¸ç´ 
F
ãƒ•ãƒƒç´ 
Ne
ãƒã‚ªãƒ³
Na
ãƒŠãƒˆãƒªã‚¦ãƒ 
Mg
ãƒã‚°ãƒã‚·ã‚¦ãƒ 
Al
ã‚¢ãƒ«ãƒŸãƒ‹ã‚¦ãƒ 
Si
ã‚±ã‚¤ç´ 
P
ãƒªãƒ³
S
ç¡«é»„
Cl
å¡©ç´ 
Ar
ã‚¢ãƒ«ã‚´ãƒ³
K
ã‚«ãƒªã‚¦ãƒ 
Ca
ã‚«ãƒ«ã‚·ã‚¦ãƒ 
Sc
ã‚¹ã‚«ãƒ³ã‚¸ã‚¦ãƒ 
Ti
ãƒã‚¿ãƒ³
V
ãƒãƒŠã‚¸ã‚¦ãƒ 
Cr
ã‚¯ãƒ­ãƒ 
Mn
ãƒãƒ³ã‚¬ãƒ³
Fe
é‰„
Co
ã‚³ãƒãƒ«ãƒˆ
Ni
ãƒ‹ãƒƒã‚±ãƒ«
Cu
éŠ…
Zn
äºœé‰›
Ga
ã‚¬ãƒªã‚¦ãƒ 
Ge
ã‚²ãƒ«ãƒãƒ‹ã‚¦ãƒ 
As
ãƒ’ç´ 
Se
ã‚»ãƒ¬ãƒ³
Br
è‡­ç´ 
Kr
ã‚¯ãƒªãƒ—ãƒˆãƒ³
Rb
ãƒ«ãƒ“ã‚¸ã‚¦ãƒ 
Sr
ã‚¹ãƒˆãƒ­ãƒ³ãƒã‚¦ãƒ 
Y
ã‚¤ãƒƒãƒˆãƒªã‚¦ãƒ 
Zr
ã‚¸ãƒ«ã‚³ãƒ‹ã‚¦ãƒ 
Nb
ãƒ‹ã‚ªãƒ–
Mo
ãƒ¢ãƒªãƒ–ãƒ‡ãƒ³
Tc
ãƒ†ã‚¯ãƒãƒã‚¦ãƒ 
Ru
ãƒ«ãƒ†ãƒ‹ã‚¦ãƒ 
Rh
ãƒ­ã‚¸ã‚¦ãƒ 
Pd
ãƒ‘ãƒ©ã‚¸ã‚¦ãƒ 
Ag
éŠ€
Cd
ã‚«ãƒ‰ãƒŸã‚¦ãƒ 
In
ã‚¤ãƒ³ã‚¸ã‚¦ãƒ 
Sn
ã‚¹ã‚º
Sb
ã‚¢ãƒ³ãƒãƒ¢ãƒ³
Te
ãƒ†ãƒ«ãƒ«
I
ãƒ¨ã‚¦ç´ 
Xe
ã‚­ã‚»ãƒãƒ³
Cs
ã‚»ã‚·ã‚¦ãƒ 
Ba
ãƒãƒªã‚¦ãƒ 
La
ãƒ©ãƒ³ã‚¿ãƒ³
Ce
ã‚»ãƒªã‚¦ãƒ 
Pr
ãƒ—ãƒ©ã‚»ã‚ªã‚¸ãƒ 
Nd
ãƒã‚ªã‚¸ãƒ 
Pm
ãƒ—ãƒ­ãƒ¡ãƒã‚¦ãƒ 
Sm
ã‚µãƒãƒªã‚¦ãƒ 
Eu
ãƒ¦ã‚¦ãƒ­ãƒ”ã‚¦ãƒ 
Gd
ã‚¬ãƒ‰ãƒªãƒ‹ã‚¦ãƒ 
Tb
ãƒ†ãƒ«ãƒ“ã‚¦ãƒ 
Dy
ã‚¸ã‚¹ãƒ—ãƒ­ã‚·ã‚¦ãƒ 
Ho
ãƒ›ãƒ«ãƒŸã‚¦ãƒ 
Er
ã‚¨ãƒ«ãƒ“ã‚¦ãƒ 
Tm
ãƒ„ãƒªã‚¦ãƒ 
Yb
ã‚¤ãƒƒãƒ†ãƒ«ãƒ“ã‚¦ãƒ 
Lu
ãƒ«ãƒ†ãƒã‚¦ãƒ 
Hf
ãƒãƒ•ãƒ‹ã‚¦ãƒ 
Ta
ã‚¿ãƒ³ã‚¿ãƒ«
W
ã‚¿ãƒ³ã‚°ã‚¹ãƒ†ãƒ³
Re
ãƒ¬ãƒ‹ã‚¦ãƒ 
Os
ã‚ªã‚¹ãƒŸã‚¦ãƒ 
Ir
ã‚¤ãƒªã‚¸ã‚¦ãƒ 
Pt
ç™½é‡‘
Au
é‡‘
Hg
æ°´éŠ€
Tl
ã‚¿ãƒªã‚¦ãƒ 
Pb
é‰›
Bi
ãƒ“ã‚¹ãƒã‚¹
Po
ãƒãƒ­ãƒ‹ã‚¦ãƒ 
At
ã‚¢ã‚¹ã‚¿ãƒãƒ³
Rn
ãƒ©ãƒ‰ãƒ³
Fr
ãƒ•ãƒ©ãƒ³ã‚·ã‚¦ãƒ 
Ra
ãƒ©ã‚¸ã‚¦ãƒ 
Ac
ã‚¢ã‚¯ãƒãƒ‹ã‚¦ãƒ 
Th
ãƒˆãƒªã‚¦ãƒ 
Pa
ãƒ—ãƒ­ãƒˆã‚¢ã‚¯ãƒãƒ‹ã‚¦ãƒ 
U
ã‚¦ãƒ©ãƒ³
Np
ãƒãƒ—ãƒ„ãƒ‹ã‚¦ãƒ 
Pu
ãƒ—ãƒ«ãƒˆãƒ‹ã‚¦ãƒ 
Am
ã‚¢ãƒ¡ãƒªã‚·ã‚¦ãƒ 
Cm
ã‚­ãƒ¥ãƒªã‚¦ãƒ 
Bk
ãƒãƒ¼ã‚¯ãƒªã‚¦ãƒ 
Cf
ã‚«ãƒªãƒ›ãƒ«ãƒ‹ã‚¦ãƒ 
Es
ã‚¢ã‚¤ãƒ³ã‚¹ã‚¿ã‚¤ãƒ‹ã‚¦ãƒ 
Fm
ãƒ•ã‚§ãƒ«ãƒŸã‚¦ãƒ 
Md
ãƒ¡ãƒ³ãƒ‡ãƒ¬ãƒ“ã‚¦ãƒ 
No
ãƒãƒ¼ãƒ™ãƒªã‚¦ãƒ 
Lr
ãƒ­ãƒ¼ãƒ¬ãƒ³ã‚·ã‚¦ãƒ 
Rf
ãƒ©ã‚¶ãƒ›ãƒ¼ã‚¸ã‚¦ãƒ 
Db
ãƒ‰ãƒ–ãƒ‹ã‚¦ãƒ 
Sg
ã‚·ãƒ¼ãƒœãƒ¼ã‚®ã‚¦ãƒ 
Bh
ãƒœãƒ¼ãƒªã‚¦ãƒ 
Hs
ãƒãƒƒã‚·ã‚¦ãƒ 
Mt
ãƒã‚¤ãƒˆãƒãƒªã‚¦ãƒ 
Ds
ãƒ€ãƒ¼ãƒ ã‚¹ã‚¿ãƒã‚¦ãƒ 
Rg
ãƒ¬ãƒ³ãƒˆã‚²ãƒ‹ã‚¦ãƒ 
Cn
ã‚³ãƒšãƒ«ãƒ‹ã‚·ã‚¦ãƒ 
Uut
ã‚¦ãƒ³ã‚¦ãƒ³ãƒˆãƒªã‚¦ãƒ 
Fl
ãƒ•ãƒ¬ãƒ­ãƒ“ã‚¦ãƒ 
Uup
ã‚¦ãƒ³ã‚¦ãƒ³ãƒšãƒ³ãƒã‚¦ãƒ 
Lv
ãƒªãƒãƒ¢ãƒªã‚¦ãƒ 
Uus
ã‚¦ãƒ³ã‚¦ãƒ³ã‚»ãƒ—ãƒã‚¦ãƒ 
Uuo
ã‚¦ãƒ³ã‚¦ãƒ³ã‚ªã‚¯ãƒã‚¦ãƒ 

</textarea>
</div>

</body>
</html>
